'use strict';

var express = require('express');
var app = express();
var fs = require('fs');
var bodyParser = require('body-parser');
var mongoose = require('mongoose');
var db = require('./db/index');
// ************************

var port = process.env.PORT || 3000;
app.use(bodyParser.urlencoded());
app.use(express.static(__dirname + '/'));
app.use(express.static(__dirname + '/css'));

app.post('/addToWatchList', function (req, res) {
  console.log(JSON.stringify(req.body));
  var x = new db({
    title: req.body.title,
    imgURL: req.body.imgURL,
    desc: req.body.desc
  });
  x.save(function (err) {
    if (err) console.log(err);
  });
});
app.get('/', function (req, res) {
  fs.readFile('html/index.html', function (err, data) {
    if (err) throw err;
    res.write(data);
    res.end();
  });
});

app.get('/mywatchlist', function (req, res) {
  db.find({}, function (err, data) {
    if (err) console.log(err);else {
      res.send(data);
      res.end();
    }
  });
});

app.get('/movies', function (req, res) {
  db.find({}, function (err, data) {
    if (err) {
      console.log(err);
    } else {
      res.send(JSON.stringify(data));
    }
  });
});
app.listen(port, function () {
  console.log('server listing on port ', port);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NlcnZlci5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImFwcCIsImZzIiwiYm9keVBhcnNlciIsIm1vbmdvb3NlIiwiZGIiLCJwb3J0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJ1c2UiLCJ1cmxlbmNvZGVkIiwic3RhdGljIiwiX19kaXJuYW1lIiwicG9zdCIsInJlcSIsInJlcyIsImNvbnNvbGUiLCJsb2ciLCJKU09OIiwic3RyaW5naWZ5IiwiYm9keSIsIngiLCJ0aXRsZSIsImltZ1VSTCIsImRlc2MiLCJzYXZlIiwiZXJyIiwiZ2V0IiwicmVhZEZpbGUiLCJkYXRhIiwid3JpdGUiLCJlbmQiLCJmaW5kIiwic2VuZCIsImxpc3RlbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNQSxVQUFVQyxRQUFRLFNBQVIsQ0FBaEI7QUFDQSxJQUFNQyxNQUFNRixTQUFaO0FBQ0EsSUFBTUcsS0FBS0YsUUFBUSxJQUFSLENBQVg7QUFDQSxJQUFNRyxhQUFhSCxRQUFRLGFBQVIsQ0FBbkI7QUFDQSxJQUFNSSxXQUFXSixRQUFRLFVBQVIsQ0FBakI7QUFDQSxJQUFNSyxLQUFLTCxRQUFRLFlBQVIsQ0FBWDtBQUNBOztBQUVBLElBQU1NLE9BQU9DLFFBQVFDLEdBQVIsQ0FBWUMsSUFBWixJQUFvQixJQUFqQztBQUNBUixJQUFJUyxHQUFKLENBQVNQLFdBQVdRLFVBQVgsRUFBVDtBQUNBVixJQUFJUyxHQUFKLENBQVFYLFFBQVFhLE1BQVIsQ0FBaUJDLFlBQVksR0FBN0IsQ0FBUjtBQUNBWixJQUFJUyxHQUFKLENBQVFYLFFBQVFhLE1BQVIsQ0FBaUJDLFlBQVksTUFBN0IsQ0FBUjs7QUFFQVosSUFBSWEsSUFBSixDQUFTLGlCQUFULEVBQTRCLFVBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFjO0FBQ3hDQyxVQUFRQyxHQUFSLENBQVlDLEtBQUtDLFNBQUwsQ0FBZUwsSUFBSU0sSUFBbkIsQ0FBWjtBQUNBLE1BQUlDLElBQUksSUFBSWpCLEVBQUosQ0FBTztBQUNaa0IsV0FBT1IsSUFBSU0sSUFBSixDQUFTRSxLQURKO0FBRVpDLFlBQVFULElBQUlNLElBQUosQ0FBU0csTUFGTDtBQUdaQyxVQUFNVixJQUFJTSxJQUFKLENBQVNJO0FBSEgsR0FBUCxDQUFSO0FBS0FILElBQUVJLElBQUYsQ0FBTyxVQUFDQyxHQUFELEVBQVM7QUFDZCxRQUFJQSxHQUFKLEVBQ0FWLFFBQVFDLEdBQVIsQ0FBWVMsR0FBWjtBQUNELEdBSEQ7QUFJRCxDQVhEO0FBWUExQixJQUFJMkIsR0FBSixDQUFTLEdBQVQsRUFBYyxVQUFDYixHQUFELEVBQU1DLEdBQU4sRUFBYztBQUMxQmQsS0FBRzJCLFFBQUgsQ0FBYSxpQkFBYixFQUFnQyxVQUFDRixHQUFELEVBQU1HLElBQU4sRUFBZTtBQUM3QyxRQUFJSCxHQUFKLEVBQVMsTUFBTUEsR0FBTjtBQUNUWCxRQUFJZSxLQUFKLENBQVdELElBQVg7QUFDQWQsUUFBSWdCLEdBQUo7QUFDRCxHQUpEO0FBS0QsQ0FORDs7QUFRQS9CLElBQUkyQixHQUFKLENBQVMsY0FBVCxFQUF5QixVQUFDYixHQUFELEVBQU1DLEdBQU4sRUFBYztBQUNyQ1gsS0FBRzRCLElBQUgsQ0FBUSxFQUFSLEVBQVksVUFBQ04sR0FBRCxFQUFNRyxJQUFOLEVBQWU7QUFDekIsUUFBSUgsR0FBSixFQUNBVixRQUFRQyxHQUFSLENBQVlTLEdBQVosRUFEQSxLQUVLO0FBQ0hYLFVBQUlrQixJQUFKLENBQVNKLElBQVQ7QUFDQWQsVUFBSWdCLEdBQUo7QUFDRDtBQUNGLEdBUEQ7QUFRRCxDQVREOztBQVdBL0IsSUFBSTJCLEdBQUosQ0FBUyxTQUFULEVBQW9CLFVBQUNiLEdBQUQsRUFBTUMsR0FBTixFQUFjO0FBQ2hDWCxLQUFHNEIsSUFBSCxDQUFRLEVBQVIsRUFBWSxVQUFDTixHQUFELEVBQU1HLElBQU4sRUFBZTtBQUN6QixRQUFJSCxHQUFKLEVBQVE7QUFDTlYsY0FBUUMsR0FBUixDQUFZUyxHQUFaO0FBQ0QsS0FGRCxNQUVLO0FBQ0hYLFVBQUlrQixJQUFKLENBQVNmLEtBQUtDLFNBQUwsQ0FBZVUsSUFBZixDQUFUO0FBQ0Q7QUFDRixHQU5EO0FBT0QsQ0FSRDtBQVNBN0IsSUFBSWtDLE1BQUosQ0FBYTdCLElBQWIsRUFBbUIsWUFBTTtBQUN2QlcsVUFBUUMsR0FBUixDQUFZLHlCQUFaLEVBQXVDWixJQUF2QztBQUNELENBRkQiLCJmaWxlIjoic2VydmVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XHJcbmNvbnN0IGJvZHlQYXJzZXIgPSByZXF1aXJlKCdib2R5LXBhcnNlcicpO1xyXG5jb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XHJcbmNvbnN0IGRiID0gcmVxdWlyZSgnLi9kYi9pbmRleCcpO1xyXG4vLyAqKioqKioqKioqKioqKioqKioqKioqKipcclxuXHJcbmNvbnN0IHBvcnQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDMwMDA7XHJcbmFwcC51c2UgKGJvZHlQYXJzZXIudXJsZW5jb2RlZCgpKTtcclxuYXBwLnVzZShleHByZXNzLnN0YXRpYyAoIF9fZGlybmFtZSArICcvJykpO1xyXG5hcHAudXNlKGV4cHJlc3Muc3RhdGljICggX19kaXJuYW1lICsgJy9jc3MnKSk7XHJcblxyXG5hcHAucG9zdCgnL2FkZFRvV2F0Y2hMaXN0JywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkocmVxLmJvZHkpKTtcclxuICB2YXIgeCA9IG5ldyBkYih7XHJcbiAgICAgdGl0bGU6IHJlcS5ib2R5LnRpdGxlLFxyXG4gICAgIGltZ1VSTDogcmVxLmJvZHkuaW1nVVJMLFxyXG4gICAgIGRlc2M6IHJlcS5ib2R5LmRlc2NcclxuICB9KVxyXG4gIHguc2F2ZSgoZXJyKSA9PiB7XHJcbiAgICBpZiAoZXJyKVxyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICB9KVxyXG59KVxyXG5hcHAuZ2V0ICgnLycsIChyZXEsIHJlcykgPT4ge1xyXG4gIGZzLnJlYWRGaWxlICgnaHRtbC9pbmRleC5odG1sJywgKGVyciwgZGF0YSkgPT4ge1xyXG4gICAgaWYgKGVycikgdGhyb3cgZXJyO1xyXG4gICAgcmVzLndyaXRlIChkYXRhKTtcclxuICAgIHJlcy5lbmQoKTtcclxuICB9KTtcclxufSk7XHJcblxyXG5hcHAuZ2V0ICgnL215d2F0Y2hsaXN0JywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgZGIuZmluZCh7fSwgKGVyciwgZGF0YSkgPT4ge1xyXG4gICAgaWYgKGVycilcclxuICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICBlbHNlIHtcclxuICAgICAgcmVzLnNlbmQoZGF0YSk7XHJcbiAgICAgIHJlcy5lbmQoKTtcclxuICAgIH1cclxuICB9KVxyXG59KTtcclxuXHJcbmFwcC5nZXQgKCcvbW92aWVzJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgZGIuZmluZCh7fSwgKGVyciwgZGF0YSkgPT4ge1xyXG4gICAgaWYgKGVycil7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgcmVzLnNlbmQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xyXG4gICAgfVxyXG4gIH0pXHJcbn0pXHJcbmFwcC5saXN0ZW4gKCBwb3J0LCAoKSA9PiB7XHJcbiAgY29uc29sZS5sb2coJ3NlcnZlciBsaXN0aW5nIG9uIHBvcnQgJywgcG9ydCk7XHJcbn0pO1xyXG4iXX0=